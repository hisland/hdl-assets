<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title> 浏览器差异 </title>
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
	<script type="text/javascript" src="../js/src/seed.js"></script>
	<script type="text/javascript">
		KISSY.ready(function(S){
			S.css_base_path = '../../css/src';
			S.use('kissy-patcher, jquery-1.4.2', function(){
				S.useCSS('reset', function(){
					
				});
			});
		});
	</script>
	<style type="text/css">
		td, th{border:1px solid #ccc;padding:3px;}
	</style>
</head>
<body style="margin:50px;">
	<p>JSP页面</p>
	<p>&lt;%@ page language="java" contentType="text/html; charset=gb2312" pageEncoding="UTF-8"%&gt;</p>
	<p>无contentType时,使用pageEncoding, 如 pageEncoding="UTF-8" 得 contentType="text/html; charset=UTF-8"</p>
	<p>pageEncoding影响的是把[jsp文本文件]转化成[java代码文件]时,对于[jsp文本文件]读取的编码方式</p>
	<p>pageEncoding要和[jsp文本文件]保存所使用的编码相同</p>
	<p>contentType是服务器返回的响应头-Content-Type</p>
	<p>contentType="text/html; charset=gb2312" 会在java文件里生成 response.setContentType("text/html; charset=UTF-8");</p>
	<p>响应头 Content-Type 比页面的 meta标签 优先级高</p>

	<p>Sevlet</p>
	<p>request.setCharacterEncoding("UTF-8");</p>
	<p>所有取参之前[request.getParameter("")], 需要设置上面这句话,否则不起作用</p>
	<p>response.setCharacterEncoding("UTF-8");</p>
	<p>所有返回内容之前[response.getWriter().write("")], 需要设置上面这句话,否则不起作用</p>
	<p>response.setContentType("text/html;charset=utf-8")</p>
	<p>不设置上面这句话,浏览器使用自己默认编码方式</p>
	<p>此应该在有内容返回[response.flushBuffer(), response.getWriter().flush()]和关闭[response.getWriter().close()]之前设置,所以放到前面比较好</p>

	<p></p>
	<p>response.getWriter().close()之后,请求结束,但后台可以继续执行</p>
</body>
</html>
